# Kamal 2.x deployment configuration for Signal Harvester
service: signal-harvester

image: zelusottomayor/signal-harvester

servers:
  web:
    hosts:
      - 143.110.169.251
    options:
      cpus: "0.5"
      memory: "512m"

proxy:
  ssl: true
  host: signalharvester.com
  app_port: 3000
  healthcheck:
    path: /up

registry:
  username: zelusottomayor
  password:
    - KAMAL_REGISTRY_PASSWORD

env:
  clear:
    NODE_ENV: production
    PORT: 3000
    DATABASE_URL: postgresql://postgres:Tw76aA$mBbTKjbGZugC7GZbXWfxdJro^@signal-harvester-db:5432/signal_harvester

builder:
  arch: amd64

ssh:
  user: root
